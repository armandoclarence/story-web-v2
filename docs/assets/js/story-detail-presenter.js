var p=o=>{throw TypeError(o)};var y=(o,t,r)=>t.has(o)||p("Cannot "+r);var e=(o,t,r)=>(y(o,t,"read from private field"),r?r.call(o):t.get(o)),n=(o,t,r)=>t.has(o)?p("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(o):t.set(o,r),h=(o,t,r,l)=>(y(o,t,"write to private field"),l?l.call(o,r):t.set(o,r),r);import{s as c}from"./api-mapper.js";import{I as d}from"./index.js";import"./map.js";var s,a,i;class M{constructor(t,{view:r,apiModel:l}){n(this,s);n(this,a);n(this,i);h(this,s,t),h(this,a,r),h(this,i,l)}async showStoryDetailMap(){e(this,a).showMapLoading();try{await e(this,a).initialMap()}catch(t){console.error("showStoryDetailMap: error:",t)}finally{e(this,a).hideMapLoading()}}async showStoryDetail(){e(this,a).showStoryDetailLoading();try{const t=await e(this,i).getStoryById(await d.init(),e(this,s));if(!t.ok){console.error("showStoryDetailAndMap: response:",t),e(this,a).populateStoryDetailError(t.message);return}console.log(t);const r=await c(t.story);console.log(r),e(this,a).populateStoryDetailAndInitialMap(t.message,r)}catch(t){console.error("showStoryDetailAndMap: error:",t),e(this,a).populateStoryDetailError(t.message)}finally{e(this,a).hideStoryDetailLoading()}}}s=new WeakMap,a=new WeakMap,i=new WeakMap;export{M as default};
